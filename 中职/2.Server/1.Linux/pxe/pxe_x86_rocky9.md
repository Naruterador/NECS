## 问题:
- linux5 安装 DHCP 服务，地址范围为10.6.120.10-10.6.120.19，网关 为 10.6.120.1，dns 为 10.6.120.101，域名为 skills.lan。
- 安装 tftp-server，tftp 目录为默认值。 
- 挂载linux光盘文件到/var/www/html/cdrom;实现完全自动安装linux文字界面，配置文件为/var/www/html/ks.cfg(参考/root/anaconda-ks.cfg)，在 /var/lib/tftpboot/pxelinux.cfg/default 文件中指定安装源和 ks 文件。

## 解:
```shell

yum install dhcp* -y
yum install tftp* httpd* syslinux* -y

cd /var/lib/tftpboot/
mkdir pxelinux.cfg

#进入光盘镜像,复制linux内核到tftp服务器
cd /var/www/html/cdrom/images/pxeboot/
cp * /var/lib/tftpboot/

#pxelinux.0启动文件到tftp服务器
cd /usr/share/syslinux
cp * /var/lib/tftpboot/

#配置启动菜单
cd /var/lib/tftpboot/pxelinux.cfg/
vi default

default menu.c32
timeout 30
menu title PXE AUTO INSTALL
label manual
menu label ^Rescure a system
kernel centos/vmlinuz
append initrd=centos/initrd.img  inst.repo=ftp://10.6.220.106/centos     inst.ks=ftp://10.6.220.105/ks.cfg

cp /usr/share/doc/dhcp-server/dhcpd.conf.example  /etc/dhcp/dhcpd.conf

vi /etc/dhcp/dhcpd.conf 
subnet 10.6.220.0 netmask 255.255.255.0 {
}
subnet 10.6.120.0 netmask 255.255.255.0 {
  range 10.6.120.10 10.6.120.19;
  option domain-name-servers 10.6.120.101;
  option domain-name "skills.lan";
  option routers 10.6.120.1;
  next-server 10.6.220.105;
  filename "pxelinux.0";
}

systemctl restart dhcpd
systemctl enable dhcpd
systemctl restart httpd 
systemctl enable httpd
systemctl restart tftp
systemctl enable tftp

cp /root/anaconda-ks.cfg  /var/www/html/ks.cfg
vi ks.cfg
# Generated by Anaconda 34.25.2.10
# Generated by pykickstart v3.32
#version=RHEL9
# Use graphical install
graphical
repo --name="AppStream" --baseurl=ftp://10.6.220.105/centos/AppStream

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

# Keyboard layouts
keyboard --xlayouts='us'
# System language
lang en_US.UTF-8

# Use CDROM installation media
#cdrom

%packages
@^minimal-environment

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.6.0
ignoredisk --only-use=sda
autopart
reboot
# Partition clearing information
clearpart --none --initlabel

# System timezone
timezone America/New_York --utc

# Root password
rootpw --iscrypted --allow-ssh $6$dD62ASr1jTU/4Epe$i8Qdlqzul48XVL1O.cp.yFaYzF0oOtcfR5r1GWWbH0k9L3ZTeob4f.IXJa83macBHuL5gEazyJRTB76sI5rCB.


```
